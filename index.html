<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>旅行ログ</title>

<!-- Leaflet -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
html, body {
  height: 100%;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

.container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

#map {
  flex: 7;
}

.panel {
  flex: 3;
  padding: 12px;
  border-top: 1px solid #ddd;
  background: #fff;
  font-size: 15px;
}
</style>
</head>

<body>
<div class="container">
  <div id="map"></div>
  <div class="panel" id="panel">
    地図をタップするとピンを追加できます
  </div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* 地図作成（日本） */
const map = L.map("map", {
  center: [36, 138],
  zoom: 5,
  minZoom: 4,
  maxZoom: 18
});

/* 地図表示 */
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "© OpenStreetMap"
}).addTo(map);

/* サイズ確定（超重要） */
map.whenReady(() => {
  map.invalidateSize();
});

const panel = document.getElementById("panel");

/* タップで必ずピンを出す */
map.on("click", function (e) {
  const marker = L.marker(e.latlng).addTo(map);

  panel.innerHTML = `
    <strong>ピンを追加しました</strong><br>
    緯度：${e.latlng.lat.toFixed(5)}<br>
    経度：${e.latlng.lng.toFixed(5)}
  `;

  marker.on("click", () => {
    panel.innerHTML = `
      <strong>この場所</strong><br>
      緯度：${e.latlng.lat.toFixed(5)}<br>
      経度：${e.latlng.lng.toFixed(5)}
    `;
  });
});
</script>

</body>
</html>
